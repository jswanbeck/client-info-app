<div class="layout">
  <div>
    <button class="btn-primary" (click)="onOpenModal('create')">New Client</button>
  </div>
  <div class="client-list-pane">
    <div class="client-list-card">
      <div class="search-input-container">
        <input
          class="search-input"
          type="text"
          placeholder="Search clients..."
          [(ngModel)]="searchTerm"
        />
      </div>
      <app-client-list
        [clients]="filteredClients"
        [selectedClient]="selectedClient"
        (clientSelected)="onClientSelected($event)">
      </app-client-list>
    </div>
  </div>
</div>

<app-expandable-panel
  [open]="selectedClient !== null"
  [title]="selectedClient?.name || 'Client Info'"
  (closed)="selectedClient = null"
>
  <ng-container *ngIf="selectedClient">
    <app-client-info [client]="selectedClient"></app-client-info>
    <div class="buttons-panel" style="margin-top: 2rem;">
      <button class="btn-secondary" (click)="onOpenModal('edit')">Edit</button>
      <button class="btn-warning" (click)="onDeleteClient()">Delete</button>
    </div>
  </ng-container>
</app-expandable-panel>

<app-modal [open]="showModal" [title]="modalTitle" (closed)="onCloseModal()">
  <app-client-modal
    [selectedClient]="selectedClient"
    [modalType]="modalType"
    (submitted)="onModalSubmitted($event)"
    (cancelled)="onModalCancelled()">
  </app-client-modal>
</app-modal>

<app-modal [open]="showConfirmDelete" title="Confirm Delete" (closed)="onCancelDelete()">
  <app-confirmation-dialog
    [message]="'Are you sure you want to delete ' + selectedClient?.name + '?'"
    [type]="'delete'"
    (confirm)="onConfirmDelete()"
    (cancel)="onCancelDelete()">
  </app-confirmation-dialog>
</app-modal>
